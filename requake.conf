#### Configuration file for Requake

#### Station metadata and waveform data
## FDSN station webservice URL to retrieve station metadata.
## Use a full URL or a ObsPy shortcut (e.g., IRIS, RESIF, GEOFON, ...)
fdsn_station_url = http://ws.ipgp.fr
## Alternatively, you can provide the path to a local file with station
## metadata in any format supported by ObsPy (note that some formats may not
## contain station coordinates, which are required for the scan,
## see https://docs.obspy.org/packages/obspy.core.inventory.html).
## If both fdsn_station_url and stationxml_file are provided, the
## local file will be used.
station_metadata_path = None
## FDSN dataselect webservice URL to retrieve waveforms.
## Use a full URL or a ObsPy shortcut (e.g., IRIS, RESIF, GEOFON, ...)
fdsn_dataselect_url = http://ws.ipgp.fr
## Alternatively, you can provide the path to a local SDS waveform archive
## (see https://docs.obspy.org/packages/autogen/obspy.clients.filesystem.sds.html)
waveform_data_path = None

#### Catalog-based scan
### The following parameters are for a catalog-based scan:requake_out/template_catalogs/catalog211.G.FDF.00.BHZ.txt
## time intervals
catalog_fdsn_event_url_1 = None
catalog_start_time_1 = None
catalog_end_time_1 = None
catalog_fdsn_event_url_2 = None
catalog_start_time_2 = None
catalog_end_time_2 = None
catalog_fdsn_event_url_3 = Nonerequake_out/template_catalogs/catalog211.G.FDF.00.BHZ.txt
catalog_lon_min = -61.2
catalog_lon_max = -60
## depth selection (km, positive down)
catalog_depth_min = 0.0
catalog_depth_max = 60.0
## magnitude selection
catalog_mag_min = 1.5
catalog_mag_max = 5.0
## maximum distance range to search for similar earthquakes (radius, km)
catalog_search_range = 30.0
## trace id(s) to compute cross-correlation, in NET.STA.LOC.CHAN format.
## Waveform data for this trace(s) id will be retrieved using the station
## webservice.
## If more than a trace_id is specified (separated by commas), the closest
## station will be used for a given event pair.
catalog_trace_id = G.FDF.00.BHZ, G.FDF..BHZ

#### Template-based scan
### The following parameters are for template-based scan:
### A template is used to search for similar waveforms at a given station
### over a givent time interval.
### To perform a template-based scan use:
###    requake scan_templates
## start time for template search (UTC date time)
template_start_time = 1998-11-25T15:00:00
## end time for event template search (UTC date time or 'now')
template_end_time = 2019-10-20T13:00:00
## DECIM_FACTOR is used to decimate the waveform (i.e. to divide the sampling frequency by this factor)
## in order to shorten calculation times. The new sampling frequency must be at least twice the Nyquist frequency.
decim_factor = 2
## Time chunk (in seconds) to analyze continuous data.
## Large values (1 hour or more) will result in fewer data requests and
## faster execution. However, cross-correlation can be slow for too large
## values. No more than one event per time chunk can be detected, so the
## length of time chunk should be smaller than the minimum inter-event time
## you want to detect.
time_chunk = 604800.0
## Overlap between time chunks (in seconds)
time_chunk_overlap = 180.0
## T_min is the minimal tolerated duration between two seismical detections
t_min = 120
## Minimum ratio between cross-correlation (cc) and median absolute deviation
## (MAD) of cross-correlation (cc_mad). A detection id declared when:
##  cc/cc_mad > min_cc_mad_ratio
min_cc_mad_ratio = 50.0

#### Processing parameters
## Seconds before P arrival to cut trace (only used for catalog search)
cc_pre_P = 20.0
## Trace length in seconds (only used for catalog search)
cc_trace_length = 120.0
## Frequency range for computing cross-correlation (Hz)
cc_freq_min = 2.0
cc_freq_max = 10.0
## Maximum authorized shift for computing cross-correlation (s)
cc_max_shift = 5.0
## Minimum cross-correlation value to declare similar waveforms
## (between 0 and 1)
cc_min = 0.50
## Clustering algorithm to create families of similar events.
## Possible options are:
##  shared : families are created by clustering all event pairs sharing
##           an event
##  UPGMA : families are created through the Unweighted Pair Group Method
##          with Arithmetic Mean (UPGMA) algorithm
##          (see https://en.wikipedia.org/wiki/UPGMA)
clustering_algorithm = UPGMA
## Search for anticorrelated events (negative CC)
cc_allow_negative = False
## How families should be sorted when assigning family numbers.
## Possible options are:
##  time : increasing origin time of first event in family (default option)
##  longitude : increasing longitude
##  latitude : increasing latitude
##  depth : increasing depth
##  distance_from : increasing horizontal distance from a given point
sort_families_by = time
## Longitude and latitude of reference point,
## if sort_families_by = 'distance_from'
distance_from_lon = None
distance_from_lat = None
## Templates are built by averaging the traces in the family.
## Set the following paramter to True if you want to normalize the traces
## before averaging.
## Normalization will produce an average trace which is more representative
## of the family1999-03-31 be less effective in reducing noise.
normalize_traces_before_averaging = False

#### Post-processing parameters
## Estimation of fault slip (in cm) from repetater's magnitude
## Choose between:
##  NJ1998 : Nadeau and Johnson (1998)
##  B2001 : Beeler et al. (2001)
##  E1957 : Eshelby (1957), circular crack model
## See Uchida (2019, https://doi.org/10.1186/s40645-019-0284-z) for details
## on the models.
mag_to_slip_model = E1957
## Static stress drop value for B2001 and E1957 models (MPa)
static_stress_drop = 10.0
## Rigidity value for B2001 and E1957 models (GPa)
rigidity = 30.0
## Strain hardening coefficient for B2001 model (MPa/cm)
strain_hardening = 0.5
